<html>
<body>
<script src="https://cdn.jsdelivr.net/npm/onnxjs/dist/onnx.min.js"></script>
<!-- script src="onnx.min.js"></script -->

<script>
 //   funtcion print()
/*
const dataA = prepareData(); // Float32Array(2)
console.log(dataA)
//const input = new onnx.Tensor(dataA, 'float32') //, [1, 2])
const buffer01 = new Float32Array(2);
buffer01[0] = 0.1; // fill buffer data
const input = new Tensor('float32', buffer01, [1, 2]);
//const input = new onnx.Tensor(dataA, 'float32') //, [1, 2])
// const input = new onnx.Tensor(new Float32Array(datos), 'float32')
*/
// input="{'onnx::Sub_0': array([[-0.68667513]], dtype=float32)}'"
</script>

<script>
function prepareData() {
    return Float32Array.from([1,1]);
}

async function test(modelo, datos) {
 const sess = new onnx.InferenceSession()
 await sess.loadModel(modelo)

console.log(sess.session._model._graph._allInputNames)
console.log(sess.session._model._graph._allData[0].type.tensorType)
console.log(sess.session._model._graph._allData[0].type.shape.dims)

//datos = [1.33]
 const input = new onnx.Tensor(new Float32Array(datos), 'float32', [1,1])

 const outputMap = await sess.run([input])
 const outputTensor = outputMap.values().next().value
 console.log('Tensor salida:',  outputTensor.data[0])
}

file='./custominverse.onnx.jpg';
 test(file, [1.2]);
 </script>

</body>
</html>
